Question 2   write a Node.js application using Express and MongoDB with the following functionality:
• Accept student details via a web form: Student_name, USN, Semester, and Exam_fee.
• Store the submitted data in a MongoDB collection.
• Implement a feature to delete all students from the database who have not paid the exam fee (Exam_fee = 0 or null).


Index.html
 <!DOCTYPE html>
<html>
<head>
  <title>Student Exam Fee Form</title>
</head>
<body>
  <h2>Student Exam Fee Form</h2>

  <form action="/submit" method="post">
    Student Name:
    <input type="text" name="student_name" required><br><br>

    USN:
    <input type="text" name="usn" required><br><br>

    Semester:
    <input type="number" name="semester" required><br><br>

    Exam Fee:
    <input type="number" name="exam_fee"><br><br>

    <button type="submit">Submit</button>
  </form>

  <br>
  <form action="/delete-unpaid" method="post">
    <button type="submit">Delete Unpaid Students</button>
  </form>
</body>
</html>


app.js  
const express = require('express');
const bodyParser = require('body-parser');
const { MongoClient } = require('mongodb');

const app = express();
app.use(bodyParser.urlencoded({ extended: true }));

const url = "mongodb://127.0.0.1:27017";
const dbName = "collegeDB";
let db;

// MongoDB connection
MongoClient.connect(url)
  .then(client => {
    db = client.db(dbName);
    console.log("Connected to MongoDB");
  })
  .catch(err => console.log(err));

// Serve HTML form
app.get('/', (req, res) => {
  res.sendFile(__dirname + "/index.html");
});

// Insert student data
app.post('/submit', async (req, res) => {
  const student = {
    student_name: req.body.student_name,
    usn: req.body.usn,
    semester: parseInt(req.body.semester),
    exam_fee: parseInt(req.body.exam_fee) || 0
  };

  await db.collection("students").insertOne(student);
  res.send("Student details stored successfully");
});

// Delete unpaid students
app.post('/delete-unpaid', async (req, res) => {
  const result = await db.collection("students").deleteMany({
    $or: [{ exam_fee: 0 }, { exam_fee: null }]
  });

  res.send(result.deletedCount + " unpaid students deleted");
});

// Start server
app.listen(3000, () => {
  console.log("Server running at http://localhost:3000");
});




Functionality Check
✔ Submit Student Details
* Data is stored in MongoDB → students collection
✔ Delete Unpaid Students
* Deletes all records where:

exam_fee = 0 OR exam_fee = null

MongoDB Verification (Optional)

mongosh
use collegeDB
db.students.find().pretty()
